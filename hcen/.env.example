# ==============================================
# HCEN Production Environment Variables
# ==============================================
# Copy this file to .env and fill in the values
# IMPORTANT: DO NOT commit .env to version control
# Add .env to .gitignore
#
# For ANTEL mi-nube Virtuozzo deployment:
# Set these in the Virtuozzo dashboard under "Environment Variables"
# ==============================================

# ==============================================
# Container Registry & Deployment
# ==============================================

# GitLab Container Registry
CI_REGISTRY_IMAGE=registry.gitlab.com/your-group/hcen
IMAGE_TAG=latest

# ==============================================
# Database Configuration (PostgreSQL)
# ==============================================

DB_NAME=hcen
DB_USER=hcen
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20

# PostgreSQL Port (for local/docker-compose)
POSTGRES_PORT=5432

# ==============================================
# MongoDB Configuration (Audit Logs)
# ==============================================

MONGO_DB=hcen
MONGO_ROOT_USER=admin
MONGO_ROOT_PASSWORD=CHANGE_ME_MONGO_PASSWORD
MONGO_PORT=27017

# ==============================================
# Redis Configuration (Sessions, Cache)
# ==============================================

REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_PORT=6379

# ==============================================
# gub.uy OIDC Configuration (PRODUCTION)
# ==============================================

# Production endpoints (obtain from AGESIC)
GUBUY_OIDC_ISSUER=https://auth.iduruguay.gub.uy/oidc/v1
GUBUY_OIDC_AUTH_ENDPOINT=https://auth.iduruguay.gub.uy/oidc/v1/authorize
GUBUY_OIDC_TOKEN_ENDPOINT=https://auth.iduruguay.gub.uy/oidc/v1/token
GUBUY_OIDC_USERINFO_ENDPOINT=https://auth.iduruguay.gub.uy/oidc/v1/userinfo
GUBUY_OIDC_JWKS_URI=https://auth.iduruguay.gub.uy/oidc/v1/jwks

# OAuth Client Credentials (REQUEST FROM AGESIC)
# Web Patient Client
GUBUY_CLIENT_WEB_PATIENT_ID=YOUR_PATIENT_CLIENT_ID
GUBUY_CLIENT_WEB_PATIENT_SECRET=YOUR_PATIENT_CLIENT_SECRET

# Web Admin Client
GUBUY_CLIENT_WEB_ADMIN_ID=YOUR_ADMIN_CLIENT_ID
GUBUY_CLIENT_WEB_ADMIN_SECRET=YOUR_ADMIN_CLIENT_SECRET

# Mobile Client
GUBUY_CLIENT_MOBILE_ID=YOUR_MOBILE_CLIENT_ID

# ==============================================
# JWT Configuration (PRODUCTION)
# ==============================================

JWT_ISSUER=https://hcen.uy
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_TTL=3600
JWT_REFRESH_TOKEN_TTL=2592000

# JWT Key Paths (mount in container)
JWT_SIGNING_KEY_PATH=/opt/hcen/keys/jwt-private.pem
JWT_PUBLIC_KEY_PATH=/opt/hcen/keys/jwt-public.pem

# ==============================================
# PDI Configuration (Plataforma de Datos)
# ==============================================

# PDI Production Endpoint (obtain from AGESIC)
PDI_SOAP_ENDPOINT=https://pdi.gub.uy/dnic/servicio-basico

# PDI Credentials (REQUEST FROM AGESIC)
PDI_SOAP_USERNAME=YOUR_PDI_USERNAME
PDI_SOAP_PASSWORD=YOUR_PDI_PASSWORD

# ==============================================
# Application Configuration
# ==============================================

# Public Application URL
APP_BASE_URL=https://hcen.uy

# Environment
APP_ENVIRONMENT=production

# CORS Allowed Origins
CORS_ALLOWED_ORIGINS=https://hcen.uy,https://www.hcen.uy,https://mobile.hcen.uy

# ==============================================
# SSL/TLS Configuration
# ==============================================

SSL_ENABLED=true
SSL_KEYSTORE_PATH=/opt/hcen/keys/ssl/keystore.jks
SSL_KEYSTORE_PASSWORD=CHANGE_ME_SSL_PASSWORD
SSL_KEY_PASSWORD=CHANGE_ME_KEY_PASSWORD

# ==============================================
# Logging
# ==============================================

LOG_LEVEL_ROOT=INFO
LOG_LEVEL_HCEN=INFO
LOG_LEVEL_HIBERNATE=WARN
LOG_PATH=/opt/hcen/logs

# ==============================================
# JVM Configuration
# ==============================================

JVM_MIN_HEAP=1g
JVM_MAX_HEAP=2g
JVM_METASPACE=512m

# ==============================================
# HTTP/HTTPS Ports
# ==============================================

HCEN_PORT=8080
HCEN_MGMT_PORT=9990
HTTP_PORT=80
HTTPS_PORT=443

# ==============================================
# Virtuozzo (ANTEL mi-nube) Deployment
# ==============================================

# Virtuozzo API Configuration (for GitLab CI/CD)
VZ_API_HOST=paas.minube.antel.com.uy
VZ_ENV_NAME=hcen-prod
VZ_NODE_ID=123456
# OR use node group instead:
# VZ_NODE_GROUP=cp

# Virtuozzo Authentication (set in GitLab CI/CD Variables - PROTECTED)
VZ_TOKEN=YOUR_VZ_SESSION_TOKEN
# OR provide credentials to obtain token:
# VZ_USER=your.email@example.com
# VZ_PASSWORD=your_vz_password

# ==============================================
# Monitoring & Metrics
# ==============================================

METRICS_ENABLED=true
METRICS_PROMETHEUS_ENABLED=true
MANAGEMENT_ENDPOINTS_ENABLED=true
